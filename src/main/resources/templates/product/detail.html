<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Chi tiết sản phẩm</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body style="background-color:#f8f5f1; color:#3a3a3a">

<div class="container py-5">

    <!-- PRODUCT IMAGE -->
    <div class="text-center mb-4">
        <img th:src="${(product.imageUrl != null and !#strings.isEmpty(product.imageUrl))
                ? product.imageUrl
                : 'https://via.placeholder.com/600x400?text=No+Image'}"
             class="img-fluid rounded shadow"
             style="max-height:380px; object-fit:cover;"
             alt="Product image"/>
    </div>

    <!-- PRODUCT INFO -->
    <div class="bg-white p-4 rounded shadow-sm">

        <h2 class="fw-bold text-success" th:text="${product.name}"></h2>

        <p class="text-muted mt-2" th:text="${product.description}">
            Mô tả sản phẩm
        </p>

        <!-- PRICE RANGE -->
        <p class="fs-5 fw-semibold text-danger">
            Giá từ:
            <span th:text="${#numbers.formatDecimal(minPrice,0,'COMMA',0,'POINT')}"></span> ₫
            -
            <span th:text="${#numbers.formatDecimal(maxPrice,0,'COMMA',0,'POINT')}"></span> ₫
        </p>

        <form th:action="@{/cart/add}" method="post">

            <!-- VARIANTS -->
            <div class="mb-3">
                <label class="form-label fw-semibold">Phân loại</label>
                <select name="variantId" class="form-select" required>
                    <option th:each="v : ${variants}"
                            th:value="${v.id}"
                            th:disabled="${v.stock == 0}"
                            th:text="'Size ' + v.size
                                    + ' - ' + v.color
                                    + ' - ' + #numbers.formatDecimal(v.price,0,'COMMA',0,'POINT') + ' ₫'">
                    </option>
                </select>
            </div>

            <!-- QUANTITY -->
            <div class="mb-3">
                <label class="form-label">Số lượng</label>
                <input type="number"
                       name="quantity"
                       class="form-control"
                       min="1"
                       value="1"
                       th:disabled="${variants.isEmpty()}">
            </div>

            <!-- ACTIONS -->
            <button type="submit"
                    class="btn btn-success fw-bold"
                    th:disabled="${variants.isEmpty()}">
                Thêm vào giỏ
            </button>

            <a th:href="@{/products}"
               class="btn btn-outline-secondary ms-2">
                ⬅ Quay lại
            </a>

        </form>
    </div>

</div>

</body>
</html>
